# nginx.conf (Simplificado para o Frontend)
server {
    # O container deve escutar na porta padrão HTTP (80)
    # O Proxy Reverso de Borda (ex: Traefik/Caddy/Nginx principal) 
    # lidará com a porta 443 e SSL, e então redirecionará para a porta 80 deste container.
    listen 80 443; 

    # Não defina 'server_name'. O Proxy de Borda fará a correspondência do Host.
    # Se precisar definir, use apenas algo genérico.
    # server_name localhost; 

    # Se uma rota não for encontrada (o padrão de um SPA), 
    # sirva o index.html para que o roteador do frontend cuide da navegação.
    location / {
        try_files $uri $uri/ /index.html;
    }

    # Tratamento de erro 404 (opcional, mas bom para SPA)
    error_page 404 /index.html;

    # Servir arquivos estáticos diretamente
    location ~* ^(?!/(gateway|rabbit|kibana|grafana|prometheus)/).*\.(js|css|png|jpg|jpeg|gif|ico|svg|woff|woff2|ttf|eot)$ {
        try_files $uri 404;
    }
}
